<div class="card mb-3 card-rounded-3 shadow-sm border border-gray-300">
  <div class="card-body d-flex flex-column">
    <span class="d-flex align-items-center justify-content-between mb-3">
      <span class="d-flex align-items-center">
        <mat-icon class="d-lg-none" routerLink="../">arrow_right_alt</mat-icon>
        <h6 class="mb-0">سفارش ها</h6>
      </span>

      <a
        class="seeAll me-3 cursor-pointer"
        (click)="changeTab(0)"
        *ngIf="!(selectedIndex$ | async)"
      >
        مشاهده همه
        <mat-icon class="material-icons-outlined">chevron_left</mat-icon>
      </a>
    </span>

    <ng-template [ngIf]="!(selectedIndex$ | async)" [ngIfElse]="tabBar">
      <div class="row mx-0 order-menu my-5">
        <a
          class="col-6 col-lg-3 d-flex flex-column flex-lg-row align-items-center order-link"
          (click)="changeTab(0)"
        >
          <img
            loadingLazy
            src="assets/media/user-orders/status-processing.svg"
            class="mb-3"
          />
          <span
            class="d-flex flex-column align-items-center align-items-lg-start mx-3"
          >
            <h6>{{ orderCounts.currentCount }} سفارش</h6>
            <span class="processing">جاری</span>
          </span>
        </a>
        <a
          class="col-6 col-lg-3 d-flex flex-column flex-lg-row align-items-center order-link"
          (click)="changeTab(1)"
        >
          <img
            loadingLazy
            src="assets/media/user-orders/status-delivered.svg"
            class="mb-3"
          />
          <span
            class="d-flex flex-column align-items-center align-items-lg-start mx-3"
          >
            <h6>{{ orderCounts.deliveredCount }} سفارش</h6>
            <span class="delivered">تحویل شده</span>
          </span>
        </a>
        <a
          class="col-6 col-lg-3 d-flex flex-column flex-lg-row align-items-center order-link"
          (click)="changeTab(2)"
        >
          <img
            loadingLazy
            src="assets/media/user-orders/status-returned.svg"
            class="mb-3"
          />
          <span
            class="d-flex flex-column align-items-center align-items-lg-start mx-3"
          >
            <h6>{{ orderCounts.returnedCount }} سفارش</h6>
            <span class="returned">مرجوع شده</span>
          </span>
        </a>
        <a
          class="col-6 col-lg-3 d-flex flex-column flex-lg-row align-items-center order-link"
        >
          <img
            loadingLazy
            src="assets/media/user-orders/status-cancelled.svg"
            class="mb-3"
          />
          <span
            class="d-flex flex-column align-items-center align-items-lg-start mx-3"
          >
            <h6>{{ orderCounts.cancelledCount }} سفارش</h6>
            <span class="cancelled">لغوشده</span>
          </span>
        </a>
      </div>
    </ng-template>

    <ng-template #tabBar>
      <mat-tab-group
        class="order-tab-bar"
        animationDuration="0s"
        [selectedIndex]="selectedIndex$ | async"
        (selectedIndexChange)="changeTab($event)"
      >
        <mat-tab>
          <ng-template mat-tab-label>
            جاری
            <span class="text-danger mx-1">{{ orderCounts.currentCount }}</span>
          </ng-template>
          <ng-template matTabContent>
            <keleman-order-list [status]="orderStatus.Current">
            </keleman-order-list>
          </ng-template>
        </mat-tab>
        <mat-tab>
          <ng-template mat-tab-label>
            تحویل شده
            <span class="text-danger mx-1">{{
              orderCounts.deliveredCount
            }}</span>
          </ng-template>
          <ng-template matTabContent>
            <keleman-order-list [status]="orderStatus.Delivered">
            </keleman-order-list>
          </ng-template>
        </mat-tab>
        <mat-tab>
          <ng-template mat-tab-label>
            مرجوع شده
            <span class="text-danger mx-1">{{
              orderCounts.returnedCount
            }}</span>
          </ng-template>
          <ng-template matTabContent>
            <keleman-order-list [status]="orderStatus.Returned">
            </keleman-order-list>
          </ng-template>
        </mat-tab>
        <!--        <mat-tab>-->
        <!--          <ng-template mat-tab-label>-->
        <!--            لغو شده-->
        <!--            <span class="text-danger mx-1">{{-->
        <!--              orderCounts.cancelledCount-->
        <!--            }}</span>-->
        <!--          </ng-template>-->
        <!--          <ng-template matTabContent>-->
        <!--            <keleman-order-list [status]="orderStatus.Cancelled">-->
        <!--            </keleman-order-list>-->
        <!--          </ng-template>-->
        <!--        </mat-tab>-->
      </mat-tab-group>
    </ng-template>
  </div>
</div>
