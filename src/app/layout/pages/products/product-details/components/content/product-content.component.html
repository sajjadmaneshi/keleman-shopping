<ng-container *ngIf="isLoading; then loading; else content"> </ng-container>

<ng-template #loading>
  <ngx-skeleton-loader
    [theme]="{ width: '57%', height: '50px' }"
    class="ms-1"
  ></ngx-skeleton-loader>
  <ngx-skeleton-loader
    class="mx-1"
    [theme]="{ width: '20%', height: '50px' }"
  ></ngx-skeleton-loader>
  <ngx-skeleton-loader
    class="mx-1"
    [theme]="{ width: '20%', height: '50px' }"
  ></ngx-skeleton-loader>
  <ngx-skeleton-loader
    class="mx-1"
    [theme]="{ width: '57%', height: '300px' }"
  ></ngx-skeleton-loader>
  <ngx-skeleton-loader
    class="mx-1"
    [theme]="{ width: '40%', height: '300px' }"
  ></ngx-skeleton-loader>

  <ngx-skeleton-loader
    *ngFor="let _ of sharedVariableService.counter(5)"
    class="mx-1"
    [theme]="{ width: '10%', height: '50px' }"
  ></ngx-skeleton-loader>

  <ngx-skeleton-loader
    class="mx-1"
    [theme]="{ width: '40%', height: '50px' }"
  ></ngx-skeleton-loader>
</ng-template>

<ng-template #content>
  <h1 class="text-h5 product-name mb-3">{{ productDetails.name! }}</h1>

  <div class="row mx-0">
    <div class="col-12 col-lg-7">
      <div
        class="product-image card card-rounded-3 shadow position-relative mb-3 box-shadow-none"
      >
        <div class="card-body">
          <lib-ngx-image-zoom
            [thumbImage]="productDetails.image!"
            [fullImage]="productDetails.image!"
            [magnification]="2"
            [altText]="productDetails.imageAlt!"
          ></lib-ngx-image-zoom>
        </div>
        <div class="action-buttons">
          <ng-container
            *ngIf="isFavorite$ | async; then favorite; else notFavorite"
          ></ng-container>
          <ng-template #favorite>
            <span
              class="material-icons favorite-button text-danger cursor-pointer"
              (click)="removeFromFavorite()"
            >
              favorite
            </span>
          </ng-template>
          <ng-template #notFavorite>
            <span
              class="material-icons favorite-button cursor-pointer"
              (click)="addToFavorite()"
            >
              favorite_border
            </span>
          </ng-template>
          <mat-icon>share</mat-icon>
          <mat-icon> create_new_folder </mat-icon>
          <mat-icon> compare </mat-icon>
          <mat-icon class="cursor-pointer" (click)="showChart()">
            show_chart
          </mat-icon>
        </div>
        <keleman-text-with-icon
          class="rate"
          [text]="'2.5'"
          [iconName]="'star'"
          [iconClass]="'text-warning'"
        ></keleman-text-with-icon>
      </div>
    </div>

    <div class="col-12 col-lg-5">
      <div class="d-none d-lg-grid grid-container mb-3">
        <div class="card card-rounded-3 shadow seller">
          <h6 class="fw-bolder">فروشنده:</h6>
          <h6>{{ productDetails.brand }}</h6>
          <a href="#" class="text-warning">سایر فروشنده ها</a>
        </div>
        <div class="card card-rounded-3 shadow waranty">
          <h6 class="fw-bolder mx-3">گارانتی</h6>
          <h6>اصالت و سلامت فیزیکی کالا</h6>
        </div>
      </div>
      <keleman-product-meta></keleman-product-meta>
    </div>
  </div>
  <div class="row mx-0">
    <div class="col-12 col-lg-7">
      <keleman-product-album class="d-none d-lg-block"></keleman-product-album>
    </div>
    <div class="col-12 col-lg-5">
      <div class="card card-rounded-3 shadow delivery border-0 box-shadow-none">
        <div class="card-body mx-0">
          <h5 class="fw-semibold d-inline">
            {{ productDetails.deliveryDescription }}
          </h5>
          <h6 class="mt-3">شرایط ارسال رایگان</h6>
        </div>
      </div>
      <div class="gradient-border flex-grow-1 my-3 d-lg-none"></div>
    </div>
  </div>
</ng-template>
