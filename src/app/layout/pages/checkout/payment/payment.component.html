<div class="d-flex flex-column">
  <label class="text-klm-primary fw-bolder mb-3" for="discountCode"
    >کدتخفیف</label
  >

  <span class="add-discount mb-3">
    <input
      id="discountCode"
      class="keleman-text-field bg-gray-300"
      [formControl]="discountCode"
      [class.is-invalid]="discountCode.invalid && isFormSubmitted"
      placeholder="کد تخفیف را وارد کنید"
    />
    <button
      class="btn btn-klm-primary"
      kelemanLoadingProgress
      [loading]="
        (loadingService.getLoadingStateObservable('add', 'discount') | async)!
      "
      (click)="submitDiscount()"
    >
      ثبت کد تخفیف
    </button>
    @if (discountCode.invalid&&isFormSubmitted){
    <span class="invalid-feedback">لطفا کد را وارد نمایید</span>
    }
  </span>

  <label class="text-klm-primary fw-bolder mb-3" for="description"
    >توضیحات</label
  >
  <textarea
    id="description"
    class="keleman-text-field bg-gray-300 mb-3"
    placeholder="توضیحات"
    [formControl]="description"
  ></textarea>
  <label class="text-klm-primary fw-bolder mb-3" for="paymentMethod"
    >روش پرداخت</label
  >
  <div class="payment-methods">
    <button
      class="payment-item"
      *ngFor="let gateway of paymentGateWays"
      [disabled]="isInSelectedGateways(gateway.id)"
      (click)="saveOrder(gateway.id)"
      [class.selected]="isInSelectedGateways(gateway.id)"
    >
      @if
      ((loadingService.getLoadingStateObservable('add','saveOrder')|async)!){
      <div class="payment-item-loading-overlay">
        <mat-spinner class="loading" [diameter]="20"></mat-spinner>
      </div>
      }

      <div class="symbol">
        <img
          loadingLazy
          [src]="'assets/media/pGateway/' + gateway.enName + '.png'"
        />
      </div>
      <span class="fs-6 d-flex flex-column">
        <p>{{ gateway.name }}</p>
        @if (gateway.id>7){
        <span class="text-success text-center"
          >({{
            gateway.id === 8
              ? userCredit.creditValue > 0
                ? (userCredit.creditValue | number : ".0") + "تومان"
                : 0
              : userCredit.walletValue > 0
              ? (userCredit.walletValue | number : ".0") + "تومان"
              : 0
          }})</span
        >
        }
      </span>
    </button>

    <button class="payment-item" (click)="openAttachReceiptDialog()">
      <span
        class="text-center d-flex justify-content-between text-danger w-100 remaining-time"
      >
        <span>زمان باقی مانده</span>
        <span>11:54:09</span>
      </span>
      <div class="symbol">
        <img src="assets/media/pGateway/bill.png" />
      </div>
      <span class="fs-6">الصاق فیش بانکی</span>
    </button>
    <button class="payment-item" (click)="openAttachChequeDialog()">
      <span
        class="text-center d-flex justify-content-between text-danger w-100 remaining-time"
      >
        <span>زمان باقی مانده</span>
        <span>11:54:09</span>
      </span>
      <div class="symbol">
        <img src="assets/media/pGateway/cheque.png" />
      </div>
      <span class="fs-6">ثبت چک صیادی</span>
    </button>
  </div>

  <span class="text-danger my-3"
    >*درصورت لزوم میتوانید چند روش پرداخت با <a> شرایط مشخص</a> به طور همزمان
    انتخاب کنید.</span
  >
</div>
